<mat-card class="create-user-form">
    <form>
        <mat-list>
            <mat-list-item>
                <mat-card-title>Ajouter un utilisateur</mat-card-title>
            </mat-list-item>

            <mat-card-content>

                <mat-list-item>
                    <mat-form-field appearance="fill" hideRequiredMarker="true">
                        <mat-label>BDE</mat-label>
                        <mat-select required [(ngModel)]="data.bde" name="bde">
                            <mat-option *ngFor="let bde of bdes" [value]="bde.uuid">
                                {{bde.name}}
                              </mat-option>
                        </mat-select>
                    </mat-form-field>
                </mat-list-item>

                <mat-list-item>
                    <mat-form-field appearance="fill" hideRequiredMarker="true">
                        <mat-label>Email</mat-label>
                        <input type="email" matInput required [(ngModel)]="data.email" name="email">
                    </mat-form-field>
                </mat-list-item>

                <mat-list-item>
                    <mat-form-field appearance="fill">
                        <mat-label>Pr√©nom <i>(optionnel)</i></mat-label>
                        <input type="text" matInput [(ngModel)]="data.firstname" name="firstname">
                    </mat-form-field>
                </mat-list-item>

                <mat-list-item>
                    <mat-form-field appearance="fill">
                        <mat-label>Nom de famille <i>(optionnel)</i></mat-label>
                        <input type="text" matInput [(ngModel)]="data.lastname" name="lastname">
                    </mat-form-field>
                </mat-list-item>

                <mat-list-item *ngIf="error || success">
                    <h2 mat-subheader  [class]="error ? 'error' : 'success'">{{ error || success}}</h2>
                </mat-list-item>

                <mat-list-item>
                        <button 
                            mat-flat-button 
                            color="primary" 
                            (click)="createUser()"
                            [disabled]="sending || data.bde.length === 0 || data.email.trim().length === 0"
                        >{{ sending ? 'Envoie en cours ...' : 'Ajouter l\'utilisateur' }}</button>
                </mat-list-item>
                
            </mat-card-content>

        </mat-list>  
    </form>
</mat-card>